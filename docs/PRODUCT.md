# PRODUCT.md — 产品文档

> 状态：起草中

## 解决什么问题

**痛点**：音乐创作门槛高，传统DAW软件复杂，普通用户难以快速上手进行音乐创作。

**目标**：降低音乐创作门槛，让前端开发者也能用熟悉的工具进行音乐创作与实验。

## 用户是谁

| 用户类型 | 描述 | 核心需求 |
|---------|------|---------|
| 前端开发者 | 熟悉代码，对Web技术栈有经验 | 用熟悉的工具做音乐 |
| 音乐爱好者 | 有音乐基础，想尝试数字创作 | 简单上手，快速出成果 |
| 创作者 | 需要快速原型验证想法 | 低成本试错 |

## 不解决什么问题

- ❌ 专业级音频编辑与混音
- ❌ 复杂的多轨音乐制作
- ❌ 音乐版权与发行

## 核心功能

### 里程碑文档

每个里程碑有独立的产品文档，位于 `docs/milestones/`：

| 里程碑 | 文档 | 状态 |
|-------|------|------|
| 🎹 音乐演奏 | `milestones/01-音乐演奏.md` | ✅ 已完成 |
| 🎵 音乐跟奏 | `milestones/02-音乐跟奏.md` | ✅ 已完成 |
| 🎛️ 编曲工作台 | `milestones/02.5-编曲工作台.md` | 🚧 开发中（基础能力已实现） |
| 🎼 MIDI记录 | `milestones/03-MIDI记录.md` | ⏳ 待创建 |
| 🤖 AI共创 | `milestones/04-AI共创.md` | ⏳ 待创建 |

**做什么**：
- 键盘映射到音符，实现实时演奏
- 支持不同乐器音色切换

**不做什么**：
- ❌ 物理建模合成（使用现有音频库）

### 2. 🎵 音乐跟奏

**做什么**：
- 上传伴奏音频
- 实时检测/显示伴奏节拍
- 用户键盘演奏与伴奏对齐

**不做什么**：
- ❌ 自动伴奏生成
- ❌ 音频编辑（裁剪/特效）

### 2.5 🎛️ 编曲工作台

**做什么**：
- 通道机架：多音轨排列，每行一个乐器通道
- 钢琴卷帘：音符编辑器，横向时间轴 + 纵向钢琴键
- 基础编曲能力（类似 FL Studio）
- 支持独立调试页：`/sequencer-debug`

**当前已完成（里程碑 2.5）**：
- ✅ 在 monorepo 新增独立包：`packages/sequencer`
- ✅ Channel Rack：通道选择、Mute/Solo、Volume（Knob 交互）
- ✅ 通道管理：新增/删除、重命名（确认提交）、上下排序
- ✅ 通道音色：每通道可切换音色（Drum/Piano/Synth/Guitar/Dist Guitar）
- ✅ 通道缩略预览：Channel Rack 以 Piano Roll 音符数据进行可视化预览
- ✅ Piano Roll：新增/删除音符、拖拽移动、拉长时值、预听、Zoom
- ✅ 多选编辑：框选、Ctrl/Cmd 多选、批量删除、批量参数
- ✅ 编辑效率：Undo/Redo、复制粘贴、粘贴后自动选中
- ✅ 可扩展范围：时间轴自动扩容、全 MIDI 音高滚动
- ✅ 批量参数区：Velocity、Length、Transpose、Nudge
- ✅ 播放与循环：Play/Stop、BPM、Loop In/Out、播放头
- ✅ 基础音频联动：按步触发通道与音符，依据力度、通道音量与通道音色发声
- ✅ 组件工程化：`VolumeKnob` 抽离到 `@ai-music-creator/ui`，由 `sequencer` 复用
- ✅ 移动端排版优化：Volume 与 Instrument 同行，减少窄屏空白区域

**待选（暂不优先）**：
- ⏳ Quantize（量化）：按 Snap 粒度对齐选中音符

**不做什么**：
- ❌ 专业 DAW 完整功能
- ❌ 音频混音

### 3. 🎼 MIDI记录

**做什么**：
- 结构化存储：乐器、音高、节拍、力度
- 导出/导入MIDI格式
- 可视化乐谱展示

**不做什么**：
- ❌ 音频波形编辑
- ❌ 复杂乐谱排版

### 4. 🤖 AI共创

**做什么**：
- 基于已有MIDI记录，AI续写旋律
- 可调节参数：风格、长度、复杂度

**不做什么**：
- ❌ 完整的AI音乐生成（仅续写）
- ❌ 音频风格迁移

## 成功标准

| 指标 | 目标 |
|-----|------|
| 上手时间 | < 10分钟能演奏第一段旋律 |
| 功能完整度 | 4个核心功能全部可用 |
| 用户留存 | 愿意多次打开使用 |

## 未来可能拓展（Assumption）

- 多人协作
- 社区分享
- 更多AI能力（风格迁移、节奏生成）
